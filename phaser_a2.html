<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Créer un jeu avec Phaser</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Créer un jeu avec Phaser</span>
					<span class="navbar-brand">Activité 2</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
	              <li><a href="./phaser_intro.html">Introduction</a></li>
								<li><a href="./phaser_a1.html">Activité 1</a></li>
	              <li><a href="./phaser_a3.html">Activité 3</a></li>
	              <li><a href="./phaser_a4.html">Activité 4</a></li>
								<li><a href="./phaser_a5.html">Activité 5</a></li>
	              <li><a href="./phaser_a6.html">Activité 6</a></li>
	              <li><a href="./phaser_a7.html">Activité 7</a></li>
								<li><a href="./phaser_a8.html">Activité 8</a></li>
	              <li><a href="./phaser_a9.html">Activité 9</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
						<li><a href="phaser_a1.html"><span class="fui-triangle-left-large"></a></li>
            <li><a href="phaser_a3.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
			<p>
				D'après Wikipédia :
			</p>
			<p>
				<i><strong>Sprite</strong> est un mot anglais possédant plusieurs significations. Il est notamment employé dans les domaines de l'infographie et du jeu vidéo, où sprite désigne une image en deux dimensions qui peut être déplacée par rapport au fond de l'écran.</i>
			</p>
			<p>
				Commençons simple, affichons un sprite :
			</p>
			<h4>À faire vous même 2.1</h4>
			<p>
				Saisissez le code suivant dans le fichier script.js et testez cet exemple
			</p>
			<pre><code class="javascript">
var game = new Phaser.Game(800,600,Phaser.AUTO,'content',{preload: preload, create: create,update:update});
function preload(){
    game.load.image('smiley','asset/smiley.png');
}
function create(){
    monSprite=game.add.sprite(0,0,'smiley');
}
function update(){
}
			</code></pre>
			<hr>
			<p>
				Analysons l'exemple du "À faire vous même 2.1"
			</p>
			<p>
				Nous avons uniquement ajouté 2 lignes :
			</p>
			<pre><code class="javascript">
game.load.image('smiley','asset/smiley.png');
			</code></pre>
			<p>Nous commençons par charger une image que nous nommons "smiley", cette image doit se trouver dans le dossier "asset" et se nomme "smiley.png". Comme vous pouvez le constater, cette ligne se trouve bien dans la fonction "preload" ce qui nous assure que la suite du programme ne sera pas exécutée avant que l'image soit complètement chargée.
			</p>
			<pre><code class="javascript">
monSprite=game.add.sprite(0,0,'smiley');
			</code></pre>
			<p>
				Nous créons un objet de type sprite à l'aide de la méthode "game.add.sprite". Cette méthode prend 3 paramètres : la coordonnée x du sprite, la coordonnée y du spirite (vous devez savoir que l'origine du repère se trouve en haut et à gauche de la fenêtre de jeu) et le nom de l'image utilisée (ici "smiley").
			</p>
			<p>
				Cet objet sprite est "rangé" dans la variable "monSprite".
			</p>
			<h4>À faire vous même 2.2</h4>
			<p>
				Modifier les valeurs des paramètres "coordonnée x du sprite et "coordonnée y du sprite" afin de placer l'image au centre de la fenêtre de jeu.
			</p>
			<hr>
			<p>
				Vous avez peut-être remarqué que si vous choisissez  400 pour la coordonnée x et 300 pour la coordonnée y, le sprite n'est pas au centre de l'écran alors qu'il devrait l'être.
			</p>
			<p>
				Pourquoi ?
			</p>
			<p>
				Par défaut "coordonnée x du sprite" et "coordonnée y du sprite" sont les coordonnées du coin "haut-gauche" du sprite.
			</p>
			<img src="img/jeux2d_2_1.jpg">
			<p>
				Pour que ce soit le centre du sprite qui soit pris en compte et non plus le coin "haut-gauche", il suffit d'ajouter la ligne suivante :
			</p>
			<pre><code class="javascript">
monSprite.anchor.setTo (0.5,0.5) ;
			</code></pre>
			<h4>À faire vous même 2.3</h4>
			<p>
				Modifier le code précédent pour que le sprite s'affiche au centre de l'écran.
			</p>
			<hr>
			<p>
				Il est possible de modifier les coordonnées du sprite après sa création. Si le sprite est créé aux coordonnées (0,0) ("monSprite=game.add.sprite(0,0,'smiley');"), vous pouvez, par la suite, modifier sa position comme bon vous semble, par exemple vous placerez le sprite "monSprite" aux coordonnées (200,150), simplement en écrivant :
			</p>
			<pre><code class="javascript">
monSprite.x=200;
monSprite.y=150;
			</code></pre>
			<p>
				N.B. Nous utilisons les attributs x et y de l'objet "monSprite".
			</p>
			<h4>À faire vous même 2.4</h4>
			<p>
				Modifier le code précédent afin de créer un sprite aux coordonnées (0,0). Une fois ce sprit créé, il vous faudra le déplacer aux coordonnées (200,150).
			</p>
			<hr>
			<p>
				Nous venons de voir 2 attributs d'un objet de type sprite (x et y). Il existe un autre attribut extrêmement intéressant, l'attribut angle.
			</p>
			<p>
				Comme vous vous en doutez sans doute, cet attribut angle nous permettra de faire faire à notre sprite des rotations :
			</p>
			<pre><code class="javascript">
monSprite.angle=45
			</code></pre>
			<p>
				fera tourner le sprite de 45°.
			</p>
			<p>
				Mais une question doit tout de suite vous venir à l'esprit : Où se trouve l'axe de rotation ?
			</p>
			<p>
				La réponse est simple : par défaut, dans le coin "haut-gauche" du sprite.
			</p>
			<p>
				Si vous désirez avoir l'axe de rotation au centre du sprite (faire faire au sprite des rotations sur lui même), il vous faudra, ici aussi, ajouter la ligne :
			</p>
			<pre><code class="javascript">
monSprite.anchor.setTo(0.5,0.5);
			</code></pre>
			<p>
				Inutile de l'ajouter 2 fois, une seule fois suffit.
			</p>
			<h4>À faire vous même 2.5</h4>
			<p>
				Écrire un programme permettant d'afficher un sprite. Faites faire à ce sprite une rotation de 45°, dans un premier temps avec l'axe de rotation placé dans le coin "haut-gauche" du sprite, puis dans un deuxième temps avec l'axe de rotation placé au centre du sprite.
			</p>
			<hr>
			<h4>À faire vous même 2.6</h4>
			<p>
				Modifier le code que vous venez d'écrire pour que le sprite ait des coordonnées et un angle de rotation aléatoires (le sprite devra "rester" dans la fenêtre de jeu et l'angle de rotation devra être compris entre 0 et 90 degrés).
			</p>
			<p>
				Pour vous aider :
			</p>
			<p>
				La méthode
			</p>
			<pre><code class="javascript">
Math.random()
			</code></pre>
			<p>
				renvoie un nombre aléatoire compris entre 0 et 1
				(comment obtenir un nombre aléatoire compris entre 0 et 800 ?).
			</p>
			<p>
				La méthode

			</p>
			<pre><code class="javascript">
Math.floor()
			</code></pre>
			<p>
				retourne le plus grand entier inférieur ou égal à la valeur donnée en paramètre.
			</p>
			<p>
				Par exemple,
			<pre><code class="javascript">
Math.floor(2.9);
			</code></pre>
			<p>
				renvoie 2.
			</p>
			<p>
				J'ajoute que les coordonnées et l'angle doivent être des entiers.
			</p>
    </div>
	</body>
</html>
