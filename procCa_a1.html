<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Créer des cartes avec Processing</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
    <script src="highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
    <script src="libProc/processing.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Créer des cartes avec Processing</span>
					<span class="navbar-brand">Activité 1</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="./Fixed Top Navbar Example for Bootstrap_files/Fixed Top Navbar Example for Bootstrap.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="./procCa_a2.html">Activité 2</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="procCa_a2.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
        <p>"Unfolding Map" (<a href="http://unfoldingmaps.org/" target="_blank">http://unfoldingmaps.org/</a>) est une Java (donc utilisable avec Processing) qui permet, très simplement, d'afficher des cartes. "Unfolding Map" utilise les données fournies par "OpenStreetMap" ("OpenStreetMap" est un projet international fondé en 2004 dans le but de créer une carte libre du monde (pour plus d'information voir <a href="http://openstreetmap.fr/" target="_blank">ici</a>).</p>
        <p>"Unfolding Map" n'est pas incorporé de base à Processing, il faut donc l'installer.
        <h4>À faire vous-même 1.1</h4>
        <p>Téléchargez "Unfolding Map" : <a href="http://unfoldingmaps.org/downloads" target="_blank">ici</a></p>
        <p>Dans le dossier "sketchbook" (dossier où sont stockés vos programmes Processing), recherchez le dossier "libraries" et créez un dossier "Unfolding" dans ce même dossier "libraries". "Dézippez" le fichier téléchargé précédement et placez les fichiers et dossiers dans le dossier "Unfolding".</p>
        <hr>
        <h4>À faire vous-même 1.2</h4>
        <p>"Unfolding Map" n'étant pas inclu dans Processing, il est nécessaire d'importer les différentes classes au bon fonctionnement de cette librairie.</p>
        <p>Après avoir lancé Processing, dans le menu "Sketch", choisissez "Importer une Librairie..." puis "Unfolding Maps". Cette action devrait vous permettre d'obtenir ceci :</p>
        <pre><code>
import de.fhpotsdam.unfolding.*;
import de.fhpotsdam.unfolding.core.*;
import de.fhpotsdam.unfolding.data.*;
import de.fhpotsdam.unfolding.events.*;
import de.fhpotsdam.unfolding.geo.*;
import de.fhpotsdam.unfolding.interactions.*;
import de.fhpotsdam.unfolding.mapdisplay.*;
import de.fhpotsdam.unfolding.mapdisplay.shaders.*;
import de.fhpotsdam.unfolding.marker.*;
import de.fhpotsdam.unfolding.providers.*;
import de.fhpotsdam.unfolding.texture.*;
import de.fhpotsdam.unfolding.tiles.*;
import de.fhpotsdam.unfolding.ui.*;
import de.fhpotsdam.unfolding.utils.*;
import de.fhpotsdam.utils.*;
        </code></pre>
        <p>Pour chaque programme utilisant "Unfolding Map" il sera nécessaire d'ajouter toutes ces lignes.</p>
        <hr>
        <h4>À faire vous-même 1.3</h4>
        <p>Saisissez et testez ce code</p>
        <pre><code>
import de.fhpotsdam.unfolding.*;
import de.fhpotsdam.unfolding.core.*;
import de.fhpotsdam.unfolding.data.*;
import de.fhpotsdam.unfolding.events.*;
import de.fhpotsdam.unfolding.geo.*;
import de.fhpotsdam.unfolding.interactions.*;
import de.fhpotsdam.unfolding.mapdisplay.*;
import de.fhpotsdam.unfolding.mapdisplay.shaders.*;
import de.fhpotsdam.unfolding.marker.*;
import de.fhpotsdam.unfolding.providers.*;
import de.fhpotsdam.unfolding.texture.*;
import de.fhpotsdam.unfolding.tiles.*;
import de.fhpotsdam.unfolding.ui.*;
import de.fhpotsdam.unfolding.utils.*;
import de.fhpotsdam.utils.*;

UnfoldingMap map;

void setup() {
    size(800, 600);
    map = new UnfoldingMap(this);
}
void draw() {
    map.draw();
}
        </code></pre>
        <p>ATTENTION : par souci de clarté, je ne ferai plus figurer les lignes "import..." dans les programmes que nous étudierons, mais leur présence est évidemment obligatoire.</p>
        <p>N.B. la carte peut mettre un peu de temps à s'afficher, en effet, les données sont récupérées sur internet.</p>
        <hr>
        <p>Ce programme est très simple :</p>
        <pre><code>
UnfoldingMap map;
...
map = new UnfoldingMap(this);
        </code></pre>
        <p>permet de créer une instance de la classe "UnfoldingMap"</p>
        <pre><code>
map.draw();
        </code></pre>
        <p>permet d'afficher la carte</p>
        <p>Pour l'instant, il n'est pas possible de se "déplacer" sur la carte, de zoomer...Il nous faut ajouter la ligne suivante :</p>
        <pre><code>
MapUtils.createDefaultEventDispatcher(this, map);
        </code></pre>
        <h4>À faire vous-même 1.4</h4>
        <p>Saisissez et testez ce code</p>
        <pre><code>
//ne pas oublier les "import"
UnfoldingMap map;

void setup() {
    size(800, 600);
    map = new UnfoldingMap(this);
    MapUtils.createDefaultEventDispatcher(this, map);
}
void draw() {
    map.draw();
}
        </code></pre>
        <p>Maintenant, il est possible, à l'aide de la souris ou du clavier, de se "déplacer" et de zoomer sur la carte.</p>
        <p>Si vous désirez, au démarage de l'application, centrer la carte et zoomer sur une zone particulière, "UnfoldingMap" vous propose d'utiliser un objet la méthode "zoomAndPanTo". Cette méthode prend 2 paramètres : un objet de type "Location" et une valeur de zoom (plus la valeur est grande, plus le zoom est important).</p>
        <p>Une instance de la classe "Location" permet de définir un point sur la carte. Le constructeur de la classe "Location" prend 2 paramètres : la latitude et la longitude du point considéré.</p>
        <pre><code>
//nous définissons un point sur la carte
Location bonloc = new Location(46.0802,6.4073);
//nous centrons la carte sur "bonloc" et nous zoomons (14)
map.zoomAndPanTo(bonloc, 10);
        </code></pre>
        <h4>À faire vous-même 1.5</h4>
        <p>Saisissez et testez ce code</p>
        <pre><code>
//ne pas oublier les "import"
UnfoldingMap map;

void setup() {
    size(800, 600);
    map = new UnfoldingMap(this);
    MapUtils.createDefaultEventDispatcher(this, map);
    Location bonloc = new Location(46.0802,6.4073);
    map.zoomAndPanTo(bonloc,14);
}
void draw() {
    map.draw();
}
        </code></pre>
        <p>Il est possible d'imposer des marqueurs sur la carte, par exemple pour indiquer la position d'une ville particulière. Il nous faudra utiliser classe "SimplePointMarker". Le constructeur de cette classe prend un seul paramètre, un objet de type "Location".</p>
        <pre><code>
Location bonloc = new Location(46.0802,6.4073);
SimplePointMarker bonMarker = new SimplePointMarker(bonloc);
        </code></pre>
        <p>Une fois le marqueur défini, il reste à l'imposer sur la carte avec la méthode "addMarkers". Cette méthode prend un ou plusieurs objets de type "SimplePointMarker".</p>
        <pre><code>
map.addMarkers(bonMarker);
        </code></pre>
        <h4>À faire vous-même 1.5</h4>
        <p>Saisissez et testez ce code</p>
        <pre><code>

        </code></pre>
    </div>
	</body>
</html>
