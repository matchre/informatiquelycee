<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Interface graphique en Python avec Tkinter</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
    <script src="libProc/processing.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Interface graphique en Python avec Tkinter</span>
					<span class="navbar-brand">Activité 5</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
	              <li><a href="./tk_intro.html">Introduction</a></li>
				  <li><a href="./tk_a1.html">Activité 1</a></li>
	              <li><a href="./tk_a2.html">Activité 2</a></li>
	              <li><a href="./tk_a3.html">Activité 3</a></li>
			<li><a href="./tk_a4.html">Activité 4</a></li>
			<li><a href="./tk_a6.html">Activité 6</a></li>
                  <li><a href="./tk_a7.html">Activité 7</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
		<li><a href="tk_a4.html"><span class="fui-triangle-left-large"></a></li>
		<li><a href="tk_a6.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
			<p>Nous allons maintenant utiliser tkinter pour dessiner. La zone de dessin proposée par tkinter s'appelle un canvas.</p>
			<pre><code class='python'>
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from Tkinter import *
fen = Tk()
can=Canvas(fen,width=500,height=500,background='white')
canv.pack()
fen.mainloop()
			</code></pre>
			<p>Nous définissons un objet de type "Canvas" : can. Le constructeur de la classe "Canvas" prend en paramètres : "fen" qui est l'objet tkinter, "width" la largeur du canvas, "height" la hauteur du canvas et "background" la couleur de fond du canvas (par défaut, la couleur de fond est grise). Comme vous avez dû le remarquer, nous avons avons ici ce que l'on appelle des "paramètres nommés". Quand certains paramètres d'une fonction sont optionnels (c'est le cas ici), il est nécessaire de nommer les paramètres comme ci-dessus (exemple "width=500").</p>
			</code></pre>
			<h4>À faire vous-même 5.1</h4>
            <p>Saisissez, testez et analysez ce code (placez cette <a href="asset/smiley.gif">image</a> dans le même répertoire que le fichier qui contiendra votre programme).</p>
            <pre><code class='python'>
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from Tkinter import *
fen = Tk()
can=Canvas(fen,width=500,height=500,background='white')
can.pack()
rect=can.create_rectangle(10,10,100,200,fill="yellow")
disque=can.create_oval(150,100,200,150,fill="red")
oval=can.create_oval(150,200,200,350,fill="")
ligne_1=can.create_line(150,80,450,250,fill="purple")
ligne_2=can.create_line(450,20,200,150,width=3)
poly=can.create_polygon(20,300,40,400,100,400,150,350)
mon_image=PhotoImage(file="smiley.gif")
img=can.create_image(250,250,image=mon_image)
text_1=can.create_text(350,350,text="Hello World!",fill="red")
text_2=can.create_text(300,400,text="Bonjour le monde!",font=("Helvetica",30))
fen.mainloop()
			</code></pre>
            <p>Vous devriez obtenir ceci :</p>
            <img src="img/tk_a5_1.png" alt="tk"/>
            <p>En vous aidant du code ci-dessus et de l'image ci-dessus, essayez de découvrir par vous-même  les différentes fonctions permettant de dessiner, d'afficher une image ou encore d'afficher du texte dans un canvas (exemples de paramètres à étudier : "fill", "file", "text", "width"...). Où se trouve l'origine du repère dans un canvas ? Consultez la documentation de tkinter en cas de difficultés. N'hésitez pas à apporter des modifications à ce code afin de vous assurer que vous avez bien compris.</p>
            <hr>
            <p>Nous allons maintenant apprendre à créer une animation (animer un dessin dans un canvas).</p>
            <h4>À faire vous-même 5.2</h4>
            <p>Saisissez, testez et analysez ce code.</p>
            <pre><code class='python'>
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from Tkinter import *
import time
fen = Tk()
can=Canvas(fen,width=500,height=500,background='white')
can.pack()
balle=can.create_oval(10,250,30,270,fill="red")
while True:
    can.move(balle,1,0)
    fen.update_idletasks()
    fen.update()
    time.sleep(0.01)
fen.mainloop()
			</code></pre>
            <hr>
            <p>Voici quelques explications sur le programme ci-dessus :</p>
            <ul>
                <li>Nous dessinons un disque (dans la suite ce disque représentera une balle) à l'aide de la méthode <i>create_oval</i>.</li>
                <li><i>while True :</i> est une boucle infinie, tout ce qui se trouve dans cette boucle sera exécuté à "l'infini" (enfin, à "l'infini" pas vraiment, car évidemment l'exécution cesse quand l'utilisateur ferme la fenêtre tkinter). Cette boucle "infinie" est un grand classique dans la conception des jeux, d'ailleurs on parle souvent de "boucle de jeu". Il faut bien comprendre qu'une animation est une
                    succession d'images fixes (comme un dessin animé). Chaque "tour de boucle" correspond à l'affichage d'une image fixe, c'est parce que cette boucle est exécutée plusieurs fois par seconde que nous avons l'impression de mouvement.</li>
                <li>l'objet "Canvas" propose la méthode <i>move</i> qui permet de déplacer un objet à l'écran. Cette méthode prend en paramètre : l'objet à déplacer (dans notre cas il s'agit de la balle), le déplacement selon l'axe x, le déplacement selon l'axe y. Dans notre cas, à chaque image, la balle se déplace de 1 pixel sur l'axe horizontal et ne se déplace pas selon l'axe vertical.</li>
                <li><i>fen.update_idletasks()</i> et <i>fen.update()</i> permettent de mettre à jour l'affichage de la fenêtre</li>
                <li>
                    Cette boucle de jeu pourrait s'exécuter plusieurs centaines de fois par seconde. Dans ce  cas, le mouvement de notre balle serait tellement rapide que vous ne verriez rien à l'écran. Pour éviter cela, nous demandons, à chaque tour de boucle, à l'
                    ordinateur de temporiser un peu (d'attendre sans rien faire) à l'aide de l'instruction <i>time.sleep(0.01)</i> (permet de "faire une pause" de 0,01 seconde). Vous pouvez éventuellement supprimer cette ligne et relancer le programme pour voir ce qui se passe (vous pouvez aussi modifier la valeur).</li>
            </ul>
            <h4>À faire vous-même 5.3</h4>
            <p>En vous inspirant de ce qui a été fait dans le "À faire vous-même 5.2", écrivez un programme permettant à la balle de rebondir sur les bords de la fenêtre.</p>
            <canvas id="a1_4" class="proc" data-processing-sources="code/An_a1_4.pde"></canvas>
            <hr>
            <h4>À faire vous-même 5.4</h4>
            <p>En vous inspirant de ce qui a été fait dans le "À faire vous-même 5.3", écrivez un programme permettant à la balle de se déplacer en diagonale et de rebondir sur les bords de la fenêtre de façon réaliste. La direction et la vitesse d'origine de la balle devront être aléatoires.</p>
            <p>Pour "tirer" un nombre entier aléatoire compris entre a et b, il suffit d'écrire <i>random.randint(a,b)</i> sans avoir oublié d'importer le module <i>random</i> en plaçant un <i>import random</i> au début de votre programme.</p>
            <canvas id="a1_6" class="proc" data-processing-sources="code/An_a1_6.pde"></canvas>
        <img src="./img/repeter.png" class="rep" onclick="startSketch_a1_6();">
        <script type="application/javascript">
            var processingInstance_a1_6;
            function startSketch_a1_6() {
                if (!processingInstance_a1_6) {
                    processingInstance_a1_6 = Processing.getInstanceById('a1_6');
                }
                processingInstance_a1_6.setup();
         }
        </script>
            <hr>
		</div>
	</body>
</html>
