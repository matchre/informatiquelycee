<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Initiation aux bases de données</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Initiation aux bases de données</span>
					<span class="navbar-brand">Activité 7</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
	              <li><a href="./mongo_intro.html">Introduction</a></li>
								<li><a href="./mongo_a1.html">Activité 1</a></li>
	              <li><a href="./mongo_a2.html">Activité 2</a></li>
	              <li><a href="./mongo_a3.html">Activité 3</a></li>
								<li><a href="./mongo_a4.html">Activité 4</a></li>
	              <li><a href="./mongo_a5.html">Activité 5</a></li>
	              <li><a href="./mongo_a6.html">Activité 6</a></li>
								<li><a href="./mongo_a8.html">Activité 8</a></li>
	              <li><a href="./mongo_a9.html">Activité 9</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
						<li><a href="mongo_a6.html"><span class="fui-triangle-left-large"></a></li>
            <li><a href="mongo_a8.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
			<p>Il est possible de modifier un document en utilisant "update"</p>
			<h4>À faire vous-même 7.1</h4>
			<p>Dans la console mongoDB, taper la requête suivante :</p>
			<pre><code>
db.fiches.update({nom :"Martin"},{$set :{secret:false}})
			</code></pre>
			<p>Le premier argument de la méthode update (dans notre exemple :{nom :"Martin"}) correspond à la condition à remplir, le deuxième argument (dans notre exemple : {$set :{secret:false}}) correspond aux modifications à effectuer.</p>
			<hr>
			<p><strong>Attention</strong> : par défaut, "update" ne modifie que le premier document rencontré, pour modifier tous les documents remplissant la ou les conditions (premier paramètre de la méthode update), il faut ajouter un troisième paramètre à la méthode update : {multi:true}.</p>
			<p>par exemple, on aura :</p>
			<pre><code>
db.fiches.update({nom :"Martin"},{$set :{secret:false}}, {multi:true})
			</code></pre>
			<p>Si plusieurs personnes portaient le nom de Martin, toutes ces personnes auraient un profil "public" (secret:false) après la requête ci-dessus</p>
			<h4>À faire vous-même 7.2</h4>
			<p>Écrire une requête qui permettra de rendre "public" tous les profils des femmes âgées de plus de 40 ans.</p>
			<hr>
			<p>Il est possible d'augmenter un nombre (faire une incrémentation)</p>
			<h4>À faire vous-même 7.3</h4>
			<p>Dans la console mongoDB, taper la requête suivante :</p>
			<pre><code>
db.fiches.update({nom :"Dupond"},{$inc :{age:1}})
			</code></pre>
			<p>Quel est l'effet de cette requête ?</p>
	</div>
	</body>
</html>
