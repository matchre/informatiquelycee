<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Programmation orientée objet avec Processing</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
    <script src="highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
    <script src="libProc/processing.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Programmation orientée objet avec Processing</span>
					<span class="navbar-brand">Activité 5</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="./Fixed Top Navbar Example for Bootstrap_files/Fixed Top Navbar Example for Bootstrap.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="./procObj_a1.html">Activité 1</a></li>
                <li><a href="./procObj_a2.html">Activité 2</a></li>
                <li><a href="procObj_a3.html">Activité 3</a></li>
                <li><a href="procObj_a4.html">Activité 4</a></li>
                <li><a href="procObj_a6.html">Activité 6</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="procObj_a4.html"><span class="fui-triangle-left-large"></a></li>
            <li><a href="procObj_a6.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
            <p>
			 Dans cette activité, nous allons mettre en pratique tout ce que nous avons vu sur la programmation objet, en travaillant sur des cas concrets.
			</p>
			<h4>À faire vous-même 5.1</h4>
            <p>Créez un programme permettant d'avoir une balle noire qui rebondit sur les bords de la fenêtre. La position de départ, la vitesse de départ ainsi que la direction de départ devront être aléatoires. La balle ne devra pas rester immobile. Vous devrez créer une classe Balle. Cette classe possédera 2 méthodes (en plus du constructeur) : "afficheBalle" (qui permettra de dessiner la balle  l'écran à l'aide d'une fonction "ellipse") et "depBalle" qui gérera les déplacements de la balle.
            </p>
            <canvas id="a5_1" class="proc" data-processing-sources="code/Poo_a5_1.pde"></canvas>
            <img src="./img/repeter.png" class="rep" onclick="startSketch_a5_1();">
            <script type="application/javascript">
                var processingInstance_a5_1;
                function startSketch_a5_1() {
                    if (!processingInstance_a5_1) {
                        processingInstance_a5_1 = Processing.getInstanceById('a5_1');
                    }
                    processingInstance_a5_1.setup();
                }
            </script>
            <p>Comme cet exemple commence à être difficile, je vous fournis une "correction" possible : cliquez <a href="procObj_c_a5_1.html" target="_blank">ici</a> pour voir la "correction"</p>
        <h4>À faire vous-même 5.2</h4>
            <p>En vous inspirant du programme développé dans le "À faire vous-même 5.1", créez un programme qui permettra d'afficher 2 balles (les couleurs des balles devront être aléatoires). La position de départ, la vitesse de départ ainsi que la direction de départ des 2 balles devront être aléatoires. Les balles ne devront pas rester immobiles. Vous devrez créer une classe Balle. Cette classe possédera 2 méthodes (en plus du constructeur) : "afficheBalle" (qui permettra de dessiner la balle l'écran à l'aide d'une fonction "ellipse") et "depBalle" qui gérera les déplacements de la balle.
            </p>
            <canvas id="a5_2" class="proc" data-processing-sources="code/Poo_a5_2.pde"></canvas>
            <img src="./img/repeter.png" class="rep" onclick="startSketch_a5_2();">
            <script type="application/javascript">
                var processingInstance_a5_2;
                function startSketch_a5_2() {
                    if (!processingInstance_a5_2) {
                        processingInstance_a5_2 = Processing.getInstanceById('a5_2');
                    }
                    processingInstance_a5_2.setup();
                }
            </script>
            <p>Cliquez <a href="procObj_c_a5_2.html" target="_blank">ici</a> pour voir la "correction"</p>
            <hr>
            <p>Dans l'exemple du "À faire vous-même 5.2" nous créons 2 objets "à la main", avec un plus grand nombre d'objets à créer (et à gérer), cette solution "manuelle" deviendrait vite ingérable. Comment faire si par exemple nous voulons créer 100 instances de "Balle" ?</p>
            <p>Le plus simple est de "stocker" les objets dans un tableau d'objet. Ainsi, nous pourrons utiliser une boucle pour parcourir ce tableau et avoir accès aux différents objets. Voici un exemple :</p>
            <h4>À faire vous-même 5.3</h4>
            <p>Saisissez, analysez et testez le programme suivant :</p>
            <pre><code>
Personnage[] tabPerso = new Personnage [5];
class Personnage {
 int vie;
 String nom;
 // le constructeur
 Personnage(int nbrVie, String nomPerso){
  vie=nbrVie;
  nom=nomPerso;
 }
 //méthode qui affiche l'état du personnage
 void afficheEtat(){
   println ("Il reste "+vie+" points de vie à "+nom);
 }
 // méthode qui enlève un point de vie au personnage concerné
 void perdVie (){
  println (nom+" subit une attaque, il perd une vie");
  vie=vie-1;
 }
}

void setup() {
  for (int i=0; i&lttabPerso.length;i=i+1){
    tabPerso[i]= new Personnage(int(10+random(10)), "Perso "+i);
  }
  for (int i=0; i&lttabPerso.length;i=i+1){
    tabPerso[i].afficheEtat();
  }
  tabPerso[2].perdVie();
  for (int i=0; i&lttabPerso.length;i=i+1){
    tabPerso[i].afficheEtat();
  }
}
        </code></pre>
        <hr>
        <p>Analysons le code du "À faire vous-même 5.3" :</p>
        <p>La ligne </p>
        <pre><code>
Personnage[] tabPerso = new Personnage [5];
        </code></pre>
        <p>permet de créer un tableau qui pourra contenir 5 objets de type Personnage</p>
        <p>Avec le boucle</p>
        <pre><code>
for (int i=0; i&lttabPerso.length;i=i+1){
    tabPerso[i]= new Personnage(int(10+random(10)), "Perso "+i);
}
        </code></pre>
        <p>nous "remplissons" le tableau "tabPerso" avec des objets de type "Personnage" (le constructeur prend 2 paramètres : le nombre de points de vie et le nom du personnage).</p>
        <p>Une fois le tableau rempli, il est possible de gérer un objet en particulier :</p>
        <pre><code>
// nous appliquons la méthode "perdVie" au 3e objet du tableau "tabPerso"
tabPerso[2].perdVie();
        </code></pre>
        <p>ou d'utiliser une boucle pour appliquer la méthode "afficheEtat" à tous les objets contenus dans le tableau :</p>
        <pre><code>
for (int i=0; i&lttabPerso.length;i=i+1){
 tabPerso[i].afficheEtat();
}
        </code></pre>
        <h4>À faire vous-même 5.3 bis</h4>
        <p>Réécrire l'exemple développé dans le "À faire vous-même 5.3" en utilisant un "ArrayList" à la place d'un tableau "classique".</p>
        <hr>
        <h4>À faire vous-même 5.4</h4>
        <p>Reprenez l'exemple du "À faire vous-même 5.2" et modifiez le code pour avoir 100 balles d'affichées au lieu de 2.</p>
        <canvas id="a5_4" class="proc" data-processing-sources="code/Poo_a5_4.pde"></canvas>
        <p>Cliquez <a href="procObj_c_a5_4.html" target="_blank">ici</a> pour voir la "correction"</p>
        <hr>
        <h4>À faire vous-même 5.5</h4>
        <p>Reprenez l'exemple du "À faire vous-même 5.4" et modifiez le code pour qu'en cas de collision entre 2 balles, les 2 balles concernées par la collision disparaissent. Afin de pouvoir mieux observer le phénomène, il faudra mettre en place un système qui activera les collisions uniquement si l'utilisateur appuie sur touche d du clavier.</p>
        <canvas id="a5_5" class="proc" data-processing-sources="code/Poo_a5_5.pde"></canvas>
        <img src="./img/repeter.png" class="rep" onclick="startSketch_a5_5();">
            <script type="application/javascript">
                var processingInstance_a5_5;
                function startSketch_a5_5() {
                    if (!processingInstance_a5_5) {
                        processingInstance_a5_5 = Processing.getInstanceById('a5_5');
                    }
                    processingInstance_a5_5.setup();
                }
            </script>
        <p>Cliquez <a href="procObj_c_a5_5.html" target="_blank">ici</a> pour voir la "correction"</p>
    </div>
	</body>
</html>
