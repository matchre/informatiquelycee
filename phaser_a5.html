<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Créer un jeu avec Phaser</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Créer un jeu avec Phaser</span>
					<span class="navbar-brand">Activité 5</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
	              <li><a href="./phaser_intro.html">Introduction</a></li>
								<li><a href="./phaser_a1.html">Activité 1</a></li>
	              <li><a href="./phaser_a2.html">Activité 2</a></li>
	              <li><a href="./phaser_a3.html">Activité 3</a></li>
								<li><a href="./phaser_a4.html">Activité 4</a></li>
	              <li><a href="./phaser_a6.html">Activité 6</a></li>
	              <li><a href="./phaser_a7.html">Activité 7</a></li>
								<li><a href="./phaser_a8.html">Activité 8</a></li>
	              <li><a href="./phaser_a9.html">Activité 9</a></li>

              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
						<li><a href="phaser_a4.html"><span class="fui-triangle-left-large"></a></li>
            <li><a href="phaser_a6.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
			<p>
				Après le clavier, occupons-nous de la souris. Il est très simple de rendre un sprite "cliquable".

			</p>
			<p>
				Si nous nommons notre sprite "monSprite", il suffit d'écrire :
			</p>
			<pre><code class="javascript">
monSprite.inputEnabled=true ;
			</code></pre>
			<p>
				Ensuite pour que le sprite "réagisse" au clic de souris, il faudra écrire :
			</p>
			<pre><code class="javascript">
monSprite.events.onInputDown.add(maFonction, this) ;
			</code></pre>
			<p>
				Nous mettons en place ici la notion d'événement : le sprite est "surveillé" en permanence (inutile de mettre cette ligne dans la fonction update). Le "onInputDown" correspond au clic de souris.
			</p>
			<p>
				En cas de clic de souris sur le sprite "monSprite", la fonction "maFonction" sera exécutée (1er paramètre de la méthode "add").
			</p>
			<p>
				Le second paramètre de la méthode "add", this, correspond à l'objet qui a "subi" le clic, c'est à dire "monSprite", mais cela n'a pas une grande importance pour nous (du moins pour l'instant).
			</p>
			<h4>À faire vous même 5.1</h4>
			<p>
				Analysez le programme et essayez de prévoir ce qui se passera quand l'utilisateur cliquera sur le sprite "monSprite".
			</p>
			<pre><code class="javascript">
var game = new Phaser.Game(800,600,Phaser.AUTO,'content',{preload: preload, create: create,update:update});
function preload(){
    game.load.image('smiley','asset/smiley.png');
}
function create(){
    monSprite=game.add.sprite(400,300,'smiley');
    monSprite.anchor.setTo (0.5,0.5);
    monSprite.inputEnabled=true;
    monSprite.events.onInputDown.add(monClic,this);
}
function monClic(){
    alert ("Cela fonctionne ! :-)")
}
function update(){
}
			</code></pre>
			<p>
				Vérifiez que l'hypothèse que vous avez émise ci-dessus est valable en testant le programme.
			</p>
			<hr>
			<h4>À faire vous même 5.2</h4>
			<p>
				Sachant qu'il est possible de "tuer" un sprite (le faire disparaître) grâce à la méthode kill() (pour "tuer" le sprite "monSprite" on écrira :
			</p>
			<pre><code class="javascript">
monSprite.kill()
			</code></pre>
			<p>
				Sachant qu'il est possible de "ramener à la vie" un sprite préalablement tué à l'aide de la méthode revive() :
			</p>
			<pre><code class="javascript">
monSprite.revive()
			</code></pre>
			<p>
					et sachant enfin qu'il est possible de connaître l'état actuel d'un sprite avec le paramètre "alive" (si
			</p>
			<pre><code class="javascript">
monSprite.alive
			</code></pre>
			<p>
					est égal à true alors le sprite est "vivant", si "monSprite.alive"  est égal à false alors le sprite est (actuellement) "mort", écrivez un programme qui :
			</p>
			<ul>
				<li>affichera un sprite au centre de l'écran</li>
				<li>en cas de clic sur ce sprite le fera disparaître</li>
				<li>en cas d'appui sur la touche A le fera réapparaître à une  position aléatoire  </li>
			</ul>
			<hr>
			<p>
				Il est possible grâce à la souris de déplacer le sprite dans la fenêtre de jeu (faire ce que l'on appelle un "drag and drop") en cliquant sur le sprite, en maintenant le clic pendant le déplacement et en relâchant le clic une fois la nouvelle position atteinte. Pour cela il suffit d'ajouter 2 lignes :
			</p>
			<pre><code class="javascript">
monSprite.inputEnabled=true;
monSprite.input.enableDrag(true);
			</code></pre>
			<h4>À faire vous même 5.3</h4>
			<p>
				Écrivez un programme qui affichera un sprite au centre de l'écran. Ce sprite devra être "déplaçable" par "drag and drop".
			</p>
    </div>
	</body>
</html>
