<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Afficher des cartes avec Leaflet</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Afficher des cartes avec Leaflet</span>
					<span class="navbar-brand">Activité 2</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                  <li><a href="./leaflet_a1.html">Activité 1</a></li>
	              <li><a href="./leaflet_a3.html">Activité 3</a></li>
	              <li><a href="./leaflet_a4.html">Activité 4</a></li>

              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
              <li><a href="leaflet_a1.html"><span class="fui-triangle-left-large"></a></li>
              <li><a href="leaflet_a3.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
        <h4>À faire vous-même 2.1</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
        </code></pre>
        <p>Comme vous pouvez le constater, il est possible de se "déplacer" sur la carte, de zoomer et de dézoomer.</p>
        <hr>
        <p>
            Voici quelques informations sur ce code :
        </p>
        <pre><code class="javascript">
var map = L.map('map');
        </code></pre>
        <p>nous permet de créer un objet de type "map".</p>
        <pre><code class="javascript">
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
        </code></pre>
        <p>La variable "osmUrl" contient l'url qui nous permettra de récupérer les images qui constitueront le fond de notre carte. Je reviendrai un peu plus bas sur cette url.</p>
        <p>La variable "osmAttrib" contient des informations sur la carte affichée</p>
        <pre><code class="javascript">
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
        </code></pre>
        <p>Nous créons un objet de type "TileLayer" qui correspond aux images du fond de carte. La fonction "TileLayer" prend 2 paramètres :</p>
        <ul>
            <li>le premier paramètre correspond à l'url</li>
            <li>le second paramètre est un objet. Nous définissons ici un seul attribut, "attribution", qui permettra d'afficher la provenance de la carte.</li>
        </ul>
        <pre><code class="javascript">
map.setView([47.0, 3.0], 6);
        </code></pre>
        <p>Nous appliquons la méthode "setView" à l'objet "map". Cette méthode prend 2 paramètres :</p>
        <ul>
            <li>"[47.0, 3.0]" est un tableau, le premier élément correspond à la latitude du centre de la carte, le second élément correspond à la longitude du centre de la carte.</li>
            <li>"6" correspond au niveau du zoom, plus la valeur sera grande, plus le zoom sur la carte sera important.</li>
        </ul>
        <pre><code class="javascript">
map.addLayer(osm);
        </code></pre>
        <p>nous lions l'objet de type "TileLayer" à la carte que nous avons à la première ligne. Cela permet donc d'afficher le fond de carte.</p>
        <p>Revenons maintenant sur l'url :</p>
        <pre><code class="javascript">
http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
        </code></pre>
        <p>Openstreetmap d'après Wikipédia :</p>
        <blockquote><p>OpenStreetMap (OSM) est un projet qui a pour but de constituer une base de données géographiques libre du monde (permettant par exemple de créer des cartes sous licence libre), en utilisant le système GPS et d'autres données libres. Il a été initié en juillet 2004 par Steve Coast au University College de Londres. Par l'utilisation de moyens informatiques basés sur Internet qui permettent l'intervention et la collaboration de tout utilisateur volontaire, OpenStreetMap relève de la géomatique 2.0 et est aussi une contribution à ce qui est appelé la néogéographie, dont les outils composent le GeoWeb.</p></blockquote>
        <p>N'hésitez pas à visiter le site d'OpenStreetMap version française : <a href="http://openstreetmap.fr/" target="_blank">http://openstreetmap.fr/</a></p>
        <p>OpenStreetMap va donc nous fournir les cartes que nous allons utiliser avec Leaflet. L'url "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png" nous permet de récupérer le fond de carte depuis les serveurs d'openStreetMap. Je ne rentrerai pas dans les détails de cette url, pour en savoir plus, je vous conseille de consulter <a href="http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames" target="_blank">ce site</a>.</p>
    </div>
	</body>
</html>
