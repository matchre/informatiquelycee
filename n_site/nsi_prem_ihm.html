<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Interface Homme-Machine</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="css/style.css">
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">NSI Première</span>
					<span class="navbar-brand">Interface Homme-Machine</span>
        </div>
      </div>
    </nav>
    <div class="container act">
			<p>
				Nous allons nous intéresser aux interfaces Homme-Machine (IHM). Une IHM permet à un utilisateur d'interagir avec une machine, la souris et le clavier sont des exemples d'IHM, mais il en existe bien d'autres. Par "machine",
				on entend bien évidemment "ordinateur", comme dans le cas du duo clavier-souris, mais pas seulement. En effet, les "machines" peuvent aussi être des objets connectés, des systèmes embarqués ou encore des robots.
				Nous allons justement nous intéresser ici à cette dernière catégorie : les robots.
			</p>
			<p>
				Qu'est-ce qu'un robot ?
			</p>
			<p>
				Le mot robot a été utilisé pour la première fois par l’écrivain tchécoslovaque Karel Čapek dans sa pièce de théâtre "Rossum's Universal Robots" en 1920, il a pour origine le mot russe "rabota" qui signifie travail, corvée. La notion de robot a été ensuite développée par l'écrivain américano-russe Isaac Asimov dans son recueil de nouvelles "Les Robots" (1950).
			</p>
			<p>
				Pour simplifier à l'extrême, un robot est constitué de 2 choses :
			</p>
			<ul>
				<li>
					des actionneurs qui lui permettent d'effectuer des actions (se déplacer, saisir des choses, faire de la soudure...)
				</li>
				<li>
					des capteurs qui lui permettent de "connaitre" son environnement (détecteurs d'obstacles, capteur de température...)
				</li>
			</ul>
			<p>
				Au niveau IHM, il est possible d'interagir avec le robot avec une simple télécommande : l'opérateur donne des ordres au robot par l'intermédiaire de cette télécommande ("aller à gauche", "avancer de 3 mètres", "prendre un objet avec une pince"...), par exemple, les robots qui interviennent
				dans des milieux dangereux (centrale nucléaire) sont télécommandés à distance par des opérateurs.
			</p>
			<div class="centrer">
				<img src="img/nsi_prem_ihm_2.jpg" alt="ihm"/>
				<figcaption>robot destiné aux interventions dans les centrales nucléaires</figcaption>
			</div>
			<div class="centrer">
				<img src="img/nsi_prem_ihm_1.jpg" alt="ihm"/>
				<figcaption>opérateur robot</figcaption>
			</div>
			<p>
				Il est aussi possible d'interagir avec un robot non pas directement, mais en le programmant afin de lui donner une certaine autonomie. La programmation consiste à donner au robot la marche à suivre en fonction des situations rencontrées : "si le capteur X détecte quelque chose alors arrête les moteurs".
			</p>
			<p>
				Nous allons nous initier à ce genre de programmation à l'aide du robot Thymio
			</p>
			<div class="centrer">
				<img src="img/thymio.jpg" alt="thymio"/>
				<figcaption>Le robot Thymio</figcaption>
			</div>
			<ul>
				<li>
					Thymio possède des capteurs : des capteurs de proximité (détection des obstacles), un accéléromètre (permet de  détecter l'inclinaison du robot), un capteur de température, un micro, mais aussi des boutons qui seront aussi considérés comme des capteurs.
				</li>
				<li>
					Thymio possède des actionneurs : 2 moteurs indépendants entrainent chacun une roue du robot. Même si ce ne sont pas à proprement parler des actionneurs, on trouvera aussi dans Thymio des LED de couleurs et un petit haut-parleur capable de jouer des sons.
				</li>
				<li>
					Thymio possède un microprocesseur qui peut être programmé, il joue, en quelque sorte, le rôle de chef d'orchestre.
				</li>
			</ul>
			<h4>À faire vous-même 1</h4>
			<p>
				Afin de mieux faire connaissance avec Thymio, visionnez la vidéo ci-dessous
			</p>
			<iframe width="560" height="315" src="https://www.youtube.com/embed/Qc6nL8twWSI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			<hr />

			<p>
				Le lycée ne possédant pas assez de Thymio, nous allons utiliser dans un premier temps  un simulateur de robot nommé <a href="https://cyberbotics.com/" target="_blank">Webots</a>. Webots est un logiciel libre et gratuit, il simule énormément de robots, du plus simple au plus complexe, nous allons l'utiliser pour simuler Thymio.
			</p>
			<h4>À faire vous-même 2</h4>
			<p>
				Voici une vidéo qui va vous permettre de configurer le simulateur webots et d'écrire votre premier programme pour Thymio. Visionnez cette vidéo, configurez le simulateur et écrivez votre premier programme pour Thymio. Testez votre programme avec le simulateur.
			</p>
			<iframe width="560" height="315" src="https://www.youtube.com/embed/GNoAGH1jacc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			<hr>
			<p>
				Voici le programme proposé dans la vidéo :
			</p>
			<pre style="color:white; background-color:black;"><code >
onevent buttons

  if  button.forward==1 then
    motor.right.target=300
    motor.left.target=300
  end

  if  button.center==1 then
    motor.right.target=0
    motor.left.target=0
  end

  if  button.backward==1 then
    motor.right.target=-300
    motor.left.target=-300
  end
			</code></pre>
			<p>
				Il faut bien comprendre que nous avons ici affaire à ce que l'on appelle de la programmation événementielle alors que d'habitude nous utilisons plutôt la programmation séquentielle.
				Notre programme va simplement définir les actions à effectuer en fonction des événements (dans le cas d'un robot, les événements seront souvent liés aux informations obtenues grâce aux capteurs).
				Notre programme sera donc une succession de "onevent" (voir la première ligne) que l'on pourrait traduire par "quand l'événement au lieu".
				Dans le cas qui nous intéresse ici nous avons un "onevent buttons" que l'on peut interpréter par "exécute le code ci-dessous en cas d'appui sur un bouton".
				À chaque fois que l'utilisateur appuiera sur un des boutons situés sur le dessus du robot, le code situé sous le "onevent" sera exécuté. Étudions une partie de ce code :
			</p>
			<pre style="color:white; background-color:black;"><code >
  if  button.forward==1 then
    motor.right.target=300
    motor.left.target=300
  end
			</code></pre>
			<p>
				Le code est très simple à comprendre : si le bouton qui a été pressé est le bouton "avant" ("button.forward==1"), alors mettre les moteurs des roues (droite et gauche) en fonctionnement à la vitesse 300.
			</p>
			<p>
				Le reste du code est aussi facile à comprendre : si c'est le bouton "central" qui est pressé, les 2 moteurs sont arrêtés, si le bouton "arrière" est pressé les moteurs sont mis en marche, mais en sens inverse (-300).
			</p>
			<p>
				Il faut bien comprendre qu'à chaque fois qu'un bouton est pressé (et seulement quand un bouton est pressé), ce code est entièrement exécuté. Il n'est pas nécessaire de maintenir le bouton pour que le robot avance, en effet, un appui sur le bouton "avant" mettra les moteurs en fonctionnement.
				Tant qu'un nouvel événement "bouton pressé" n'aura pas été déclenché, les moteurs continueront à fonctionner, puisqu'en l'absence d'événement le programme ne fait strictement rien (à part surveiller la survenue d'éventuels événements).
			</p>
			<p>
				Il est aussi possible d'utiliser d'autres événements, par exemple, la frappe dans les mains ou encore la (petite) tape sur le robot :
			</p>
			<ul>
				<li>
					frappe dans les mains : "onevent mic" ("mic" comme micro)
				</li>
				<li>
					tape sur le robot : "onevent tap"
				</li>
			</ul>
			<p>
				Il est possible d'allumer des LEDs. Thymio possède plusieurs séries de LEDs mais dans le simulateur seules certaines LEDs sont visibles.
			</p>
			<p>
				Par exemple, la ligne :
			</p>
			<pre style="color:white; background-color:black;"><code >
call leds.bottom.right(255,0,0)
			</code></pre>
			<p>
				permet d'allumer une LED située en bas et à droite en rouge.
			</p>
			<p>
				Les 3 nombres situés entre parenthèses correspondent aux canaux Rouge, Vert et Bleu. La valeur de chaque canal est comprise entre 0 et 255. Pour éteindre une LED il suffit de mettre les 3 canaux à zéro.
			</p>
			<h4>À faire vous-même 3</h4>
			<p>
				Étudiez, saisissez et testez le programme ci-dessous à l'aide du simulateur :
			</p>
			<pre style="color:white; background-color:black;"><code >
onevent mic
  call leds.bottom.left(0,255,0)
  call leds.bottom.right(0,255,0)
onenvent tap
  call leds.bottom.left(0,0,0)
  call leds.bottom.right(0,0,0)
			</code></pre>
			<p>
				Il est possible d'utiliser des variables :
			</p>
			<pre style="color:white; background-color:black;"><code >
var i = 600
...
...
if i &lt 400 then
	i = i+1
	call leds.bottom.right(0,255,0)
end
			</code></pre>
			<p>
				Il est nécessaire d'utiliser le mot-clé "var" pour déclarer une variable ("var" doit être utilisé uniquement au moment de la déclaration d'une variable)
			</p>
			<h4>À faire vous-même 4</h4>
			<p>
				Visionnez la vidéo suivante et analysez le comportement du robot présent dans cette vidéo
			</p>
			<iframe width="560" height="315" src="https://www.youtube.com/embed/5ppsMDX4SbQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			<p>
				Programmez Thymio afin qu'il reproduise ce comportement dans une simulation avec Webots.
			</p>
			<hr />
			<p>
				Comme déjà dit plus haut Thymio possède des capteurs de proximité. Il est évidemment possible d'utiliser ces capteurs de proximité pour déclencher des événements. Quand un capteur de proximité détecte quelque chose cela un événement "prox", on aura donc dans notre programme un "onevent prox".
			</p>
			<h4>À faire vous-même 5</h4>
			<p>
				Visionnez la vidéo suivante et essayez de répéter les opérations présentées dans cette vidéo dans le simulateur Webots.
			</p>
			<iframe width="560" height="315" src="https://www.youtube.com/embed/1oCvqYcof8U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			<p>
				Voici le programme proposé dans la vidéo :
			</p>
			<pre style="color:white; background-color:black;"><code >
onevent buttons

  if  button.forward==1 then
    motor.right.target=300
    motor.left.target=300
  end

  if  button.center==1 then
    motor.right.target=0
    motor.left.target=0
  end

  if  button.backward==1 then
    motor.right.target=-300
    motor.left.target=-300
  end

onevent prox

  if prox.horizontal[2]>10 then
    motor.right.target=0
    motor.left.target=0
  end
			</code></pre>
			<p>
				Seule nouveauté, le code qui suit "onevent prox" :
			</p>
			<pre style="color:white; background-color:black;"><code >
if prox.horizontal[2]>10 then
  motor.right.target=0
  motor.left.target=0
end
			</code></pre>
			<p>
				"prox.horizontal" correspond aux capteurs de proximité situés sur l'avant du robot. Il y a 5 capteurs de proximité situés sur l'avant, numéroté de 0 à 4. "prox.horizontal[2]" correspond au 3e capteur (le capteur situé au centre).
				Quand "prox.horizontal[X]" (X correspond à n° du capteur) est égal à 0, cela signifie que le capteur ne détecte rien. Plus "prox.horizontal[X]" est grand et plus l'objet détecté est proche.
			</p>
			<p>
				Voici quelques liens qui vous permettront d'approfondir le sujet :
			</p>
			<ul>
				<li>
					un pdf qui résume pas mal de choses en une seule page : <a href="http://aseba.wdfiles.com/local--files/fr:asebausermanual/ThymioCheatSheet_fr.pdf" target="_blank">pdf</a>
				</li>
				<li>
					la documentation du langage : <a href="http://wiki.thymio.org/fr:asebalanguage" target="_blank">doc</a>
				</li>
				<li>
					documentation sur la programmation des capteurs et des actionneurs de Thymio : <a href="http://wiki.thymio.org/fr:thymioapi" target="_blank">capteurs et actionneurs</a>
				</li>
			</ul>
			</div>
</html>
