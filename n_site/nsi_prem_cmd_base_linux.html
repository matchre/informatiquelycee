<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Linux : les commandes de base en ligne de commande</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">NSI Première</span>
					<span class="navbar-brand">Linux : les commandes de base en ligne de commande</span>
        </div>
      </div>
    </nav>
    <div class="container act">
			<p>
				À la "préhistoire" des systèmes d'exploitation, ces derniers étaient dépourvus d'interface graphique (système de fenêtres
				"pilotables" à la souris),
				toutes les interactions "système d'exploitation - utilisateur" se faisaient par l'intermédiaire de "lignes de commandes"
				 (suites de caractères, souvant ésotériques, saisies par l'utilisateur). Aujourd'hui,
				même si les interfaces graphiques modernes permettent d'effectuer le plupart des opérations,
				il est important de connaitre quelques unes de ces lignes de commandes.
			</p>
			<p>
				Pour saisir des lignes de commandes, nous allons utiliser une console (aussi appelé terminal même si ce n'est pas exactement la même chose).
			</p>
			<h4>À faire vous-même 1</h4>
			<p>
				Ouvrez une console, vous devriez avoir quelque chose qui ressemble à cela :
			</p>
			<div class="centrer">
				<img src="img/nsi_prem_base_linux_1.png" alt="console"/>
				<figcaption>console système GNU/Linux</figcaption>
		 </div>
			<p>
				Nous avons ci-dessus la console de l'utilisateur "david" qui utilise un ordinateur qui se nomme "PC-Bureau" ("david@PC-Bureau").
			</p>
			<hr />
			<p>
				Principalement nous allons, grâce à la ligne de commande, travailler sur les fichiers et les dossiers. Dans les systèmes de type "UNIX" (par exemple GNU/Linux ou macOS),
				 nous avons un système de fichier en arborescence :
			</p>
			<div class="centrer">
				<img src="img/nsi_prem_base_linux_2.png" alt="console"/>
				<figcaption>système de fichiers</figcaption>
		 </div>
		 <p>
			Dans le schéma ci-dessus on trouve des dossiers (noms entourés d'un rectangle, exemple : "home") et des fichiers (uniquement des noms "grub.cfg").
			À noter : les exstensions des noms de fichiers, par exemple le "cfg" de "grub.cfg" ne sont pas obligatoires dans les systèmes de type "UNIX", par exemple, "bash" est bien un nom de fichier et il n'a pas d'extension.
		 </p>
		 <p>
			On parle d'arborescence car ce système de fichier ressemble à un arbre à l'envers.
		 </p>
			<p>Comme vous pouvez le constater, la base de l'arbre s'appelle la racine de l'arborescence et se représente par un "/"</p>
			<h4>Chemin absolu ou chemin relatif ?</h4>
			<p>Pour indiquer la position d'un fichier (ou d'un dossier) dans l'arborescence, il existe 2 méthodes :
				indiquer un chemin absolu ou indiquer un chemin relatif. Le chemin absolu doit indiquer « le chemin » depuis la racine.
				Par exemple le chemin absolu du fichier fiche.ods sera : /home/elsa/documents/fiche.ods</p>
			<p>Remarquez que nous démarrons bien de la racine / (attention les symboles de séparation sont aussi des /)</p>
			<p>Il est possible d'indiquer le chemin non pas depuis la racine, mais depuis un dossier quelconque, nous parlerons alors de chemin relatif  :</p>
			<p> Le chemin relatif permettant d'accéder au fichier "photo_1.jpg" depuis le répertoire "max" est : "images/photo_vac/photo_1.jpg" </p>
			<p>Remarquez l’absence du / au début du chemin (c'est cela qui nous permettra de distinguer un chemin relatif et un chemin absolu).</p>
			<p>Imaginons maintenant que nous désirions indiquer le chemin relatif pour accéder au fichier "gdbd_3.jpg" depuis le dossier "photos_vac".</p>
			<p>Comment faire ?</p>
			<p>Il faut "remonter" d'un "niveau" dans l'arborescence pour se retrouver dans le dossier "images" et ainsi
				pouvoir repartir vers la bonne "branche". Pour ce faire il faut utiliser 2 points : ..</p>
			<p>"../ski/gdbd_3.jpg"</p>
			<p>Il est tout à fait possible de remonter de plusieurs "crans" : "../../" depuis le dossier "photos_vac" permet de "remonter" dans le dossier "max"</p>
			<h4>À faire vous-même 2</h4>
			<p>
				En vous basant sur l'arborescence ci-dessus, déterminez le chemin absolu permettant d'accéder au fichier :
			</p>
			<ul>
				<li>
					"cat"
				</li>
				<li>
					"rapport.odt"
				</li>
			</ul>
			<p>
				Toujours en vous basant sur l'arborescence ci-dessus, déterminez le chemin relatif permettant d'accéder au fichier :
			</p>
			<ul>
				<li>
					"rapport.odt" depuis le dossier "elsa"
				</li>
				<li>
					"fiche.ods" depuis le dossier "boulot"
				</li>
			</ul>
			<hr />
			<p>
				Comme déjà évoqué plus haut, les sytèmes de type "UNIX" sont des systèmes "multi-utilisateurs" : chaque utilisateur possède son propre compte (nous aurons l'occasion de revenir plus tard sur la gestion des utilisateurs).
				Chaque utilisateur possède un répertoire à son nom, ces répertoires personnels se situent traditionnelement dans le dossier "home". Dans l'arborescence ci-dessus, nous avons 2 utilisateurs : "max" et "elsa".
				Par défaut, quand un utilisateur ouvre une console, il se trouve dans son répertoire personnel. Dans l'image de la console ci-dessus, nous avons un "david@PC-Bureau ~ $" (au passage, on appele cela "l'invite de commande"), le "~" (caractère "tilde") signifie
				que l'on se trouve actuellement dans le répértoire personnel de l'utilisateur courant, autrement dit dans le répertoire de chemin absolu "/home/david" (puisque l'utilisateur courant est "david"). Le répértoire "où l'on se trouve actuellement" est appelé "répertoire courant".
				L'invite de commande vous indique à tout moment le répertoire courant : "david@PC-Bureau ~/Documents $" vous indique que vous êtes dans le répertoire "Documents" qui se trouve dans le répertoire "david" qui se trouve dans le répertoire "home" (chemin absolu : "/home/david/Documents")
			</p>
			<p>
				Attention : les systèmes de type "UNIX" sont "sensibles à la casse" (il faut différencier les caractères majuscules et les caractères minuscules) : le répertoire "Documents" et le répertoire "documents" sont 2 répertoires différents.
			</p>
			<h4>La commande cd</h4>
			<p>
					La commande "cd" permet de changer le répertoire courant. Il suffit d'indiquer le chemin (relatif ou absolu) qui permet d'atteindre le nouveau répertoire :
			</p>
			<p>
				Par exemples (en utilisant l'arborescence ci-dessus) :
			</p>
			<ul>
				<li>
					si le répertoire courant est le répertoire "elsa" et que vous "voulez vous rendre" dans le répertoire "documents", il faudra saisir la commande : "cd documents" (relatif) ou "cd /home/elsa/documents" (absolu)
				</li>
				<li>
					si le répertoire courant est le répertoire "photos_vac" et que vous "voulez vous rendre" dans le répertoire "ski", il faudra saisir la commande : "cd ../ski" (relatif) ou "cd /home/max/images/ski" (absolu)
				</li>
				<li>
					si le répertoire courant est le répertoire "boulot" et que vous "voulez vous rendre" dans le répertoire "documents", il faudra saisir la commande : "cd .." (relatif) ou "cd /home/elsa/documents" (absolu)
				</li>
			</ul>
			<h4>À faire vous-même 3</h4>
			<p>
				Toujours en utilisant l'arborescence ci-dessus, quelle est la commande à saisir si le répertoire courant est le répertoire "home" et que vous "voulez vous rendre" dans le répertoire "boulot" (vous utiliserez d'abors un chemin absolu puis un chemin relatif)
			</p>
			<h4>La commande ls</h4>
			<p>
				La commande "ls" permet de lister le contenu du répertoire courant.
			</p>
			<div class="centrer">
				<img src="img/nsi_prem_base_linux_3.png" alt="console"/>
		 </div>
		 <p>Dans l'exemple ci-dessus, depuis le répertoire personnel de l'utilisateur "david", nous passons dans le dossier "nsi" à l'aide d'un "cd nsi", puis nous affichons le contenu de ce répertoire "nsi" à l'aide de la commande "ls". Nous trouvons dans le répertoire "nsi" :
			 2 fichiers ("fiche1.odt" et "photo.jpg") et un répertoire ("test").
		</p>
			<h4>À faire vous-même 4</h4>
			<p>
				Après avoir ouvert une console, utilisez la commande ls depuis votre répertoire personel.
			</p>
			<hr>
			<h4>La commande "mkdir"</h4>
			<p>
				La commande "mkdir" permet de créer un répertoire dans le répertoire courant. La commande est de la forme "mkdir nom_du_répertoire"
			</p>
			<div class="centrer">
				<img src="img/nsi_prem_base_linux_4.png" alt="console"/>
		 </div>
		 <p>Remarque : il est préférable de ne pas utiliser de caractères accentués dans les noms de répértoire (ou de fichier). Il en est de même pour les espaces
			 (à remplacer par des caractères tirets bas "_") </p>
		 <h4>À faire vous-même 5</h4>
		 <p>
			 Après avoir ouvert une console, utilisez la commande "mkdir" afin de créer un répertoire "nsi" dans votre répertoire personel.
		 </p>
		 <h4>La commande "rm"</h4>
		 <p>
			 La commande "rm" permet de supprimer un fichier ou un répertoire. La commande est de la forme "rm nom_du_répertoire_ou_nom_du_fichier"
		</p>
		<div class="centrer">
			<img src="img/nsi_prem_base_linux_5.png" alt="console"/>
	 </div>
		<p>La plupart des commandes UNIX peuvent être utilisées avec une ou des options. Par exemple, pour supprimer un répertoire non vide, il est nécessaire d'utiliser
			la commande "rm" avec l'option "-r" : "rm -r nom_du_dossier"
		</p>
		<div class="centrer">
			<img src="img/nsi_prem_base_linux_6.png" alt="console"/>
	 </div>
	 <h4>La commande "touch"</h4>
	 <p>
		 La commande "touch" permet de créer un fichier vide. La commande est de la forme "touch nom_du_fichier_à_créer"
	</p>
	<div class="centrer">
		<img src="img/nsi_prem_base_linux_7.png" alt="console"/>
 </div>
 <h4>La commande "cp"</h4>
 <p>La commande "cp" permet de copier un fichier. La commande est de la forme "cp /répertoire_source/nom_fichier_à_copier /répertoire_destination/nom_fichier"</p>
 <div class="centrer">
	 <img src="img/nsi_prem_base_linux_8.png" alt="console"/>
</div>
<p>À noter : le nom du fichier "destination" n'est pas obligatoirement le même que le nom du fichier "source" (on peut avoir "cp fic.txt info/fiche.txt")</p>
	<h4>À faire vous-même 6</h4>
	<p>Placez-vous dans le répertoire "nsi" créé au "À faire vous-même 5". Créez un fichier "test.txt". Créez un dossier "doc". Copiez le fichier "test.txt" dans le dossier "doc".
		Effacez le dossier doc (et son  contenu).
	</p>
	<h4>Gestion des utilisateurs et des groupes</h4>
	<p>Les systèmes de type "UNIX" sont des systèmes multiutilisateurs, plusieurs utilisateurs peuvent donc partager un même ordinateur, chaque utilisateur possédant un environement
		de travail qui lui est propre.
	</p>
	<p>Chaque utilisateur possède certains droits lui permettant d'effectuer certaines opérations et pas d'autres. Le système d'exploitation permet de gérer ces droits très finement.
		Un utilisateur un peu particulier possède tous les droits : ce "super utilisateur" est appelé "administrateur" ou "root". C'est cet "administrateur" qui pourra attribuer ou retirer
		certains droits aux autres utilisateurs.
		Au lieu de gérer les utilisateurs un par un, il est possible de crééer des groupes d'utiliisateurs. L'administrateur attribue des droits à un groupe au lieu d'attribuer des droits
		 particuliers à chaque utilisateur.
	</p>
	<p>
		Comme nous venons de le voir, chaque utilisateur possède des droits qui lui ont été octroyés par le "super utilisateur". Nous nous interesserons ici uniquement aux droits liés aux
		 fichiers, mais vous devez savoir, qu'il existe d'autres droits liés aux autres élèments du système d'exploitation ((imprimante, instalation de logiciels...).
	</p>
	<p>
		Les fichiers et les dossiers possèdent 3 types de droit :
	</p>
	<ul>
		<li>les droits en lecture (symbolisés par la lettre r) : est-il possible de lire le contenu de ce fichier</li>
		<li>les droits en écriture (symbolisés par la lettre w) : est-il possible de modifier le contenu de ce fichier</li>
		<li>les droits en exécution (symbolisés par la lettre x) : est-il possible d'éxecuter le contenu de ce fichier (quand le fichier du code exécutable)</li>
	</ul>
	<p>
		Il existe 3 types d'utilisateurs pour un fichier ou un dossier :
	</p>
	<ul>
		<li>le propriétaire du fichier (par défaut c'est la personne qui a créé le fichier), il est symbolisé par la lettre u</li>
		<li>un fichier est associé à un groupe, toutes les utilisateurs appartenant à ce groupe possède des droits particuliers sur ce fichier. Le groupe est symbolisé par la lettre g</li>
		<li>tous les autres utilisateurs (ceux qui ne sont pas le propriétaire du fichier et qui n'appartiennent pas au groupe associé au fichier). Ces utilisateurs sont symbolisés
			la lettre a</li>
	</ul>
	<p>
		Il est possible d'utiliser la commande "ls" avec l'option "-l" afin d'avoir des informations supplémentaires.
	</p>
	<div class="centrer">
		<img src="img/nsi_prem_base_linux_9.png" alt="console"/>
 </div>
 <p>Prenons la première ligne :</p>
 <pre><code>
-rw-r--r-- 1 david david 0 avril 13 19:58 fic.txt
 </code></pre>
 <p>Lisons cette ligne de gauche à droite :</p>
 <ul>
	 <li>le premier symbole "-" signifie que l'on a affaire à un fichier, dans le cas d'un répertoire, nous aurions un "d" (voir la 2e ligne)</li>
	 <li>les 3 symboles suivants "rw-"donnent les droits du propriétaire du fichier : lecture autorisée (r), écriture autorisée (w), exécution interdite (- à la place de x)</li>
	 <li>les 3 symboles suivants "r--"donnent les droits du groupe lié au fichier : lecture autorisée (r), écriture interdite (- à la place de w), exécution
		 interdite (- à la place de x)</li>
		 <li>les 3 symboles suivants "r--"donnent les droits des autres utilisateurs : lecture autorisée (r), écriture interdite (- à la place de w), exécution
	 		interdite (- à la place de x)</li>
			<li>le caractère suivant "1" donne le nombre de lien (nous n'étudierons pas cette notion ici)</li>
			<li>le premier "david" représente le nom du propriétaire du fichier</li>
			<li>le second "david" représente le nom du groupe lié au fichier</p>
			<li>le "0" représente la taille du fichier en octet (ici notre ficher est vide)</p>
			<li>"avril 13 19:58" donne la date et l'heure de la dernière modification du fichiers</li>
			<li>"fic.txt" est le nom du fichier</li>
		</ul>
		<p>Prenons la deuxième ligne :</p>
	  <pre><code>
	 drwxr-xr-x 2 david david 4096 avril 13 20:05 info
	  </code></pre>
	  <p>Lisons cette ligne de gauche à droite :</p>
		<ul>
	 	 <li>le premier symbole "d" signifie que l'on a un répertoire</li>
	 	 <li>les 3 symboles suivants "rwx"donnent les droits du propriétaire du répertoire : lecture du contenu du répertoire autorisée (r), modification du contenu du répertoire autorisée (w),
			  il est possible de parcourir le répertoire (voir le contenu du répertoire) (x)</li>
	 	 <li>les 3 symboles suivants "r-x"donnent les droits du groupe lié au répertoire : modification du contenu du répertoire interdite (- à la place de w)</li>
	 		 <li>les 3 symboles suivants "r-x"donnent les droits des autres utilisateurs : modification du contenu du répertoire interdite (- à la place de w)</li>
	 			<li>le caractère suivant "2" donne le nombre de lien (nous n'étudierons pas cette notion ici)</li>
	 			<li>le premier "david" représente le nom du propriétaire du répertoire</li>
	 			<li>le second "david" représente le nom du groupe lié au répertoire</p>
	 			<li>le "4096" représente la taille du répertoire en octets</li>
	 			<li>"avril 13 20:05" donne la date et l'heure de la dernière modification du contenu du répertoire</li>
	 			<li>"info" est le nom du répertoire</li>
	 		</ul>
			<h4>À faire vous-même 7</h4>
			<p>Analysez la 3e ligne du résultat de la commande "ls -l" ci-dessus</p>
			<hr>
			<p>Il est important de ne pas perdre de vu que l'utilisateur "root" possède tous les droits sur tous les fichiers et tous les répertoires, nous aurons donc pour "root"
				systématiquement "rwx".
			</p>  
	</div>
	</body>
</html>
