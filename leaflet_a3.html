<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Afficher des cartes avec Leaflet</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			  ga('create', 'UA-92673245-1', 'auto');
			  ga('send', 'pageview');
			</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">Afficher des cartes avec Leaflet</span>
					<span class="navbar-brand">Activité 3</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Activités<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                  <li><a href="./leaflet_a1.html">Activité 1</a></li>
	              <li><a href="./leaflet_a2.html">Activité 2</a></li>
	              <li><a href="./leaflet_a4.html">Activité 4</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
              <li><a href="./leaflet_a2.html"><span class="fui-triangle-left-large"></a></li>
              <li><a href="./leaflet_a4.html"><span class="fui-triangle-right-large"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container act">
        <p>Leaflet permet de placer des marqueurs sur une carte, tout simplement en renseignant la longitude et la latitude du marqueur.</p>
        <h4>À faire vous-même 3.1</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
//on ajoute le marqueur ci-dessous
var marker = L.marker([46.079722, 6.401389]);
marker.addTo(map);
        </code></pre>
        <hr>
        <p>
            Rien de complexe dans ce code :
        </p>
        <ul>
            <li>"var marker = L.marker([46.079722, 6.401389]);" nous définissons un "marker" en donnant sa latitude et sa longitude.</li>
            <li>"marker.addTo(map);" permet d'ajouter le "marker" à la carte.</li>
        </ul>
        <p>Pour effacer un "marker", il suffit d'utiliser la méthode "removeLayer". Cette méthode prend en paramètre le nom du "marker" :</p>
        <pre><code class="javascript">
map.removeLayer(marker);
        </code></pre>
        <h4>À faire vous-même 3.2</h4>
        <p>Voici un tableau qui contient différentes coordonnées (latitude, longitude) :</p>
        <pre><code class="javascript">
var tabCoord=[[46.079722, 6.401389],[45,6],[47.466702,0.7],[43.787222,-1.403056],[46.53972,2.43028]]
        </code></pre>
        <p>Créez un programme permettant de placer des "markers" à ces différents endroits (vous devrez évidemment utiliser une boucle)</p>
        <hr>
        <p>Il est possible de placer des messages sur la carte à l'aide de "pop-up"</p>
        <h4>À faire vous-même 3.3</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
//on ajoute un pop-up
var popup = L.popup();
popup.setLatLng([46.079722, 6.401389]);
popup.setContent("&ltp&gtBonneville&lt/p&gt&ltp&gt12479 habitants (en 2012)&lt/p&gt");
popup.openOn(map);
        </code></pre>
        <hr>
        <p>Quelques mots sur ce code :</p>
        <ul>
            <li>"var popup = L.popup();" permet de créer un pop-up</li>
            <li>"popup.setLatLng([46.079722, 6.401389]);" permet de définir les coordonnées du pop-up</li>
            <li>"popup.setContent("&ltp&gtBonneville&lt/p&gt&ltp&gt12479 habitants (en 2012)&lt/p&gt")" permet de définir le texte affiché par le pop-up</li>
            <li>"popup.openOn(map);" permet d'afficher le pop-up sur la carte.</li>
        </ul>
        <p>Un pop-up peut être directement relié à un marker (un clic sur le marker fera apparaitre le pop-up) :</p>
        <h4>À faire vous-même 3.4</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
var marker = L.marker([46.079722, 6.401389]);
marker.bindPopup("&ltp&gtBonneville&lt/p&gt&ltp&gt12479 habitants (en 2012)&lt/p&gt");
marker.addTo(map);
        </code></pre>
        <hr>
        <p>Leaflet propose énormément d'options possibles pour les markers et les pop-up, pour en savoir plus, n'hésitez pas à consulter la documentation officielle : <a href="http://leafletjs.com/reference.html#marker" target="_blank">pour les markers</a> et <a href="http://leafletjs.com/reference.html#popup" target="_blank">pour les pop-up</a></p>
        <p>Leaflet permet de "dessiner" sur la carte, voici quelques méthodes qui pourront vous êtes utiles :</p>
        <ul>
            <li>la méthode "polyline" vous permet de dessiner une "ligne brisée", cette méthode prend en paramètre un tableau constitué des coordonnées des sommets successifs de la ligne brisée</li>
            <li>la méthode "polygon" vous permet de dessiner un polygone, cette méthode prend en paramètre un tableau constitué des coordonnées des sommets du polygone</li>
            <li>la méthode "circle" vous permet de dessiner un cercle, cette méthode prend pour premier paramètre un tableau constitué des coordonnées du centre du cercle et pour second paramètre le rayon du cercle.</li>
        </ul>
        <p>Leaflet propose d'autres figures géomètriques que je vous laisse découvrir en consultant <a href="http://leafletjs.com/reference.html" target="_blank">la documentation officielle.</a></p>
        <h4>À faire vous-même 3.5</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
var ligne=L.polyline([[45,3],[46,3],[45.5,4],[47,3.5]]);
ligne.addTo(map);
var poly=L.polygon([[44,0],[44.7,1],[45.3,1.33],[46,2.5],[46.9,0]]);
poly.addTo(map);
var cercle=L.circle([46.079722, 6.401389],50000);
cercle.addTo(map);
        </code></pre>
        <hr>
        <p>La méthode "setStyle" permet de modifier le style des figures géométriques, comme par exemple : </p>
        <ul>
            <li>la couleur du trait (color)</li>
            <li>l'épaisseur du trait (weight)</li>
            <li>la couleur de "remplissage" (fillColor)</li>
        </ul>
        <p>pour avoir une liste exhaustive des propriétés qui peuvent être modifiées, consulter <a href="http://leafletjs.com/reference.html#path" target="_blank">la documentation officielle.</a></p>
        <h4>À faire vous-même 3.6</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
var poly=L.polygon([[44,0],[44.7,1],[45.3,1.33],[46,2.5],[46.9,0]]);
poly.setStyle({color:"#ff0000", weight:3, fillColor:"#00ff00"});
poly.addTo(map);
        </code></pre>
        <hr>
        <p>Remarques :</p>
        <ul>
            <li>la méthode "setStyle" prend en paramètre un objet JavaScript qui a pour attributs les propriétés à modifier.</li>
            <li>les couleurs sont données au format rgb hexadécimal</li>
        </ul>
        <p>Il est possible d'associer des pop-up aux figures géométriques :</p>
        <h4>À faire vous-même 3.7</h4>
        <p>À l'aide d'un éditeur de texte, saisissez le code suivant dans le fichier "script.js" puis testez cet exemple.</p>
        <p>
            script.js
        </p>
        <pre><code class="javascript">
var map = L.map('map');
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var osm = new L.TileLayer(osmUrl, {attribution: osmAttrib});
map.setView([47.0, 3.0], 6);
map.addLayer(osm);
var poly=L.polygon([[44,0],[44.7,1],[45.3,1.33],[46,2.5],[46.9,0]]);
poly.setStyle({color:"#ff0000", weight:3, fillColor:"#00ff00"});
poly.bindPopup("&ltp&gtCela fonctionne aussi avec un polygone !&lt/p&gt");
poly.addTo(map);
        </code></pre>
    </div>
	</body>
</html>
